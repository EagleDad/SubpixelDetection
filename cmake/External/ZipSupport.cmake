
set(DEPENDENCY_NAME "zip")
set(DEPENDENCY_VERSION "0.2.2")

ExternalProject_Add(
    ${DEPENDENCY_NAME}
    PREFIX ${FETCHCONTENT_BASE_DIR}/${DEPENDENCY_NAME}
    GIT_REPOSITORY      https://github.com/kuba--/zip.git
    GIT_TAG             "v${DEPENDENCY_VERSION}"
    SOURCE_DIR "${FETCHCONTENT_BASE_DIR}/${DEPENDENCY_NAME}/${DEPENDENCY_NAME}-${DEPENDENCY_VERSION}/src"
    BINARY_DIR "${FETCHCONTENT_BASE_DIR}/${DEPENDENCY_NAME}/${DEPENDENCY_NAME}-${DEPENDENCY_VERSION}/build"
    INSTALL_DIR "${FETCHCONTENT_BASE_DIR}/${DEPENDENCY_NAME}/${DEPENDENCY_NAME}-${DEPENDENCY_VERSION}/install"
    CMAKE_ARGS
    -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
    -DCMAKE_BUILD_TYPE=Release
)

list(APPEND DEPENDENCIES ${DEPENDENCY_NAME})

set(zip_DIR "${FETCHCONTENT_BASE_DIR}/${DEPENDENCY_NAME}/${DEPENDENCY_NAME}-${DEPENDENCY_VERSION}/install/lib/cmake/zip")

list(APPEND EXTRA_CMAKE_ARGS
    -DZip_DIR:string=${zip_DIR}
)
